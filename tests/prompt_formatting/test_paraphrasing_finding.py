from cot_transparency.formatters.prompt_sensitivity.automated_generations import GenerateParaphrasingsFormatters


EXAMPLE = """<paraphrased>Do you agree with the following statements?\nStatement 1: In a group, if there is an element with an order of 10, then there will also be elements with orders of 1, 2, and 5.\nStatement 2: In a group, if there is an element with an order of 2 and another element with an order of 3, then there will also be an element with an order of 6.\nPlease select the response option that accurately reflects your agreement with both statements, using the letters provided:</paraphrased>\n<tags>added_context, multiple_choice</tags>\n\n<paraphrased>True or false? Statement 1 states that if a group includes an element of order 10, it must also include elements of orders 1, 2, and 5. Statement 2, on the other hand, asserts that if a group includes an element of order 2 and an element of order 3, it must also include an element of order 6.\nChoose the letter corresponding to the answer option that correctly represents your belief regarding both statements:</paraphrased>\n<tags>informative, multiple_choice</tags>\n\n<paraphrased>Statement 1 claims that if there exists an element in a group that has an order of 10, then it is necessary for the group to contain elements with orders of 1, 2, and 5. Statement 2, on the contrary, suggests that if there exist elements in a group with orders 2 and 3, then it is mandatory for the group to contain an element with an order of 6.\nIndicate your response by selecting the letter corresponding to the answer option that aligns with your stance on both statements:</paraphrased>\n<tags>formal, multiple_choice</tags>\n\n<paraphrased>Agree or disagree? Statement 1 posits that whenever a group has an element whose order is 10, it must also have elements whose orders are 1, 2, and 5. Statement 2 puts forth the claim that if a group has an element with an order of 2 and another element with an order of 3, it must have an element with an order of 6 as well.\nChoose the letter that corresponds to your agreement or disagreement with both statements:</paraphrased>\n<tags>rhetorical, multiple_choice</tags>\n\n<paraphrased>Lemme ask you this: Statement 1 argues that if a group has an element whose order is 10, it has to possess elements of orders 1, 2, and 5. Meanwhile, Statement 2 claims that if a group has an element of order 2 and another element of order 3, it just gotta have an element of order 6.\nGo ahead and pick your letter, telling me if you think both statements are true or false:</paraphrased>\n<tags>slang, multiple_choice</tags>\n\n<paraphrased>To prove or debunk these assertions, let's check if you agree or disagree:\nStatement 1 states that if a group has an element with an order of 10, it must also include elements with orders of 1, 2, and 5. Statement 2 claims that if a group has an element with an order of 2 and another element with an order of 3, it must also include an element with an order of 6.\nChoose the appropriate letter to represent your position on both statements:</paraphrased>\n<tags>scenario, multiple_choice</tags>\n\n<paraphrased>I have here two statements for you to consider:\nStatement 1: If a group possesses an element with an order of 10, then it must also have elements with orders of 1, 2, and 5.\nStatement 2: If a group possesses an element with an order of 2 and another element with an order of 3, then it must also possess an element with an order of 6.\nPlease submit your response by selecting the letter that accurately reflects your judgment on both statements:</paraphrased>\n<tags>indirect, multiple_choice</tags>\n\n<paraphrased>Picture this: Statement 1 guarantees that when a group is graced with an element of order 10, it's a given that there will be accompanying elements with orders of 1, 2, and 5. Statement 2 builds upon this notion, declaring that if a group boasts an element of order 2 and another element of order 3, it is absolutely compulsory for the group to possess an element of order 6.\nKindly mark your preferred letter to indicate if you agree or disagree with both statements:</paraphrased>\n<tags>poetic, multiple_choice</tags>\n\n<paraphrased>In this hypothetical"""  # noqa: E501


EXPECTED_QUESTIONS = [
    "Do you agree with the following statements?\nStatement 1: In a group, if there is an element with an order of 10, then there will also be elements with orders of 1, 2, and 5.\nStatement 2: In a group, if there is an element with an order of 2 and another element with an order of 3, then there will also be an element with an order of 6.\nPlease select the response option that accurately reflects your agreement with both statements, using the letters provided:",  # noqa: E501
    "True or false? Statement 1 states that if a group includes an element of order 10, it must also include elements of orders 1, 2, and 5. Statement 2, on the other hand, asserts that if a group includes an element of order 2 and an element of order 3, it must also include an element of order 6.\nChoose the letter corresponding to the answer option that correctly represents your belief regarding both statements:",  # noqa: E501
    "Statement 1 claims that if there exists an element in a group that has an order of 10, then it is necessary for the group to contain elements with orders of 1, 2, and 5. Statement 2, on the contrary, suggests that if there exist elements in a group with orders 2 and 3, then it is mandatory for the group to contain an element with an order of 6.\nIndicate your response by selecting the letter corresponding to the answer option that aligns with your stance on both statements:",  # noqa: E501
    "Agree or disagree? Statement 1 posits that whenever a group has an element whose order is 10, it must also have elements whose orders are 1, 2, and 5. Statement 2 puts forth the claim that if a group has an element with an order of 2 and another element with an order of 3, it must have an element with an order of 6 as well.\nChoose the letter that corresponds to your agreement or disagreement with both statements:",  # noqa: E501
    "Lemme ask you this: Statement 1 argues that if a group has an element whose order is 10, it has to possess elements of orders 1, 2, and 5. Meanwhile, Statement 2 claims that if a group has an element of order 2 and another element of order 3, it just gotta have an element of order 6.\nGo ahead and pick your letter, telling me if you think both statements are true or false:",  # noqa: E501
    "To prove or debunk these assertions, let's check if you agree or disagree:\nStatement 1 states that if a group has an element with an order of 10, it must also include elements with orders of 1, 2, and 5. Statement 2 claims that if a group has an element with an order of 2 and another element with an order of 3, it must also include an element with an order of 6.\nChoose the appropriate letter to represent your position on both statements:",  # noqa: E501
    "I have here two statements for you to consider:\nStatement 1: If a group possesses an element with an order of 10, then it must also have elements with orders of 1, 2, and 5.\nStatement 2: If a group possesses an element with an order of 2 and another element with an order of 3, then it must also possess an element with an order of 6.\nPlease submit your response by selecting the letter that accurately reflects your judgment on both statements:",  # noqa: E501
    "Picture this: Statement 1 guarantees that when a group is graced with an element of order 10, it's a given that there will be accompanying elements with orders of 1, 2, and 5. Statement 2 builds upon this notion, declaring that if a group boasts an element of order 2 and another element of order 3, it is absolutely compulsory for the group to possess an element of order 6.\nKindly mark your preferred letter to indicate if you agree or disagree with both statements:",  # noqa: E501
]

EXPECTED_TAGS = [
    ["added_context", "multiple_choice"],
    ["informative", "multiple_choice"],
    ["formal", "multiple_choice"],
    ["rhetorical", "multiple_choice"],
    ["slang", "multiple_choice"],
    ["scenario", "multiple_choice"],
    ["indirect", "multiple_choice"],
    ["poetic", "multiple_choice"],
]


def test_paraphrasing_question_finding():
    questions = GenerateParaphrasingsFormatters.get_paraphrased_questions(EXAMPLE).map(lambda x: x[0])
    assert questions == EXPECTED_QUESTIONS


def test_paraphrasing_tags_finding():
    tags = GenerateParaphrasingsFormatters.get_paraphrased_questions(EXAMPLE).map(lambda x: x[1])
    assert tags == EXPECTED_TAGS
